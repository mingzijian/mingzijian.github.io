数据库事务
---------

### 概念
  数据库事务( transaction)是访问并可能操作各种数据项的一个数据库操作序列，这些操作要么全部执行,要么全部不执行，是一个不可分割的工作单位。事务由事务开始与事务结束之间执行的全部数据库操作组成。

### 作用
 1. 为数据库操作提供了一个从失败中恢复到正常状态的方法，同时提供了数据库即使在异常状态下仍能保持一致性的方法。
 2. 当多个应用程序在并发访问数据库时，可以在这些应用程序之间提供一个隔离方法，以防止彼此的操作互相干扰。

### 特性(ACID)
 - 原子性（Atomicity）
   事务作为一个整体被执行，包含在其中的对数据库的操作要么全部被执行，要么都不执行。
 - 一致性（Consistency）
   事务应确保数据库的状态从一个一致状态转变为另一个一致状态。一致状态的含义是数据库中的数据应满足完整性约束。
 - 隔离性（Isolation）
   多个事务并发执行时，一个事务的执行不应影响其他事务的执行。
 - 持久性（Durability）
   一个事务一旦提交，他对数据库的修改应该永久保存在数据库中。

### 隔离级别
 - 读未提交（Read Uncommitted）
   允许事务读取未被其他事务提交的变更数据，会出现脏读、不可重复读和幻读问题。
 - 读已提交（Read Committed）（Oracle 默认）
   只允许事务读取已经被其他事务提交的变更数据，可避免脏读，仍会出现不可重复读和幻读问题。
 - 可重复读（Repeated Read） （MySQL 默认）
   确保事务可以多次从一个字段中读取相同的值，在此事务持续期间，禁止其他事务对此字段的更新，可以避免脏读和不可重复读，仍会出现幻读问题。
 - 串行化（Serializable）
   确保事务可以从一个表中读取相同的行，在这个事务持续期间，禁止其他事务对该表执行插入、更新和删除操作，可避免所有并发问题，但性能低。
   
#### 互联网项目MySQL事务隔离级别建议改为：RC(读已提交)
理由：
1， RC 相比 RR 能支持更高的并发
    条件未命中索引时，RR会锁表，RC只锁行
    RR存在间隙锁，比RC更容易出现死锁
2， 不可重复读可以接受
    毕竟事务都已经提交了