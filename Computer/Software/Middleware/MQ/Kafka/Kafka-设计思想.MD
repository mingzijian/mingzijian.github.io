Kafka 设计思想
----------------------
1. ## 动机（目标）

   作为一个统一的平台来处理大公司可能拥有的所有实时数据馈送。

2. ## 持久化

   合理利用磁盘和内存，并配合数据结构，使持节化变得高效和灵活。
   
3. ## 性能

   pagecache ，sendfile ，zero-copy
   压缩（GZIP，Snappy ，LZ4）

4. ## 生产者

   负载均衡
   异步发送

5. ## 消费者

   推/拉
   持续追踪已经被消费的内容
   离线数据加载

6. ## 消息分发策略

   消息交付语义保证：
   - At most once（最多一次）——消息可能会丢失但绝不重传。
   - At least once（最少一次）——消息可以重传但绝不丢失。
   - Exactly once（正好一次）——这正是人们想要的, 每一条消息会被且只被传递一次。

7. ## 备份

   Kafka 允许 topic 的 partition 拥有若干副本，你可以在server端配置partition 的副本数量。当集群中的节点出现故障时，能自动进行故障转移，保证数据的可用性。
   
8. ## 日志压缩

   日志压缩可确保 Kafka 始终至少为单个 topic partition 的数据日志中的每个 message key 保留最新的已知值。 （Redis AOF）
   这样的设计解决了应用程序崩溃、系统故障后恢复或者应用在运行维护过程中重启后重新加载缓存的场景。
   
9. ## 配额

   控制集群资源的使用。（谁在用迅雷？）

### 参考
- https://kafka.apachecn.org/documentation.html#design