## 固定时间窗口算法

![固定时间窗口算法](https://gitee.com/mingzijian/resources/raw/master/picgo/2024-03/15110b79f5472ab7881666597c64cb03.png)

## 滑动时间窗口算法

![滑动时间窗口算法-1](https://gitee.com/mingzijian/resources/raw/master/picgo/2024-03/67b6ab2783bbf2998cf76b632cee19a2.png)

![滑动时间窗口算法-2](https://gitee.com/mingzijian/resources/raw/master/picgo/2024-03/28b9de67c5d829ecd879a129d18aa25f.png)

## 样本窗口

### 样本窗口概念

- 样本窗口的长度必须小于滑动窗口长度（如果等于滑动窗口长度就会退化成固定时间窗口）
- 一般滑动窗口长度是样本窗口的**整数倍**，比如：4*样本窗口=1个滑动窗口
- 每个样本窗口在到达终点时间时，会统计本样本窗口中的流量数据并且记录下来。
- 当一个请求达到时，会统计当前请求时间点所在的样本窗口中的流量数据，然后在获取当前请求时间的样本窗口以外的同一个滑动窗口中的样本窗口的统计数据，进行求和，如果没有超出阈值，则通过，否则就会被限流

![样本窗口-1](https://gitee.com/mingzijian/resources/raw/master/picgo/2024-03/925dd1210161298dbd7a999e659356c8.png)

![样本窗口-2](https://gitee.com/mingzijian/resources/raw/master/picgo/2024-03/5f0f656b2a017ab2d0d36185eff962de.png)

![滚动窗口](https://gitee.com/mingzijian/resources/raw/master/picgo/2024-03/image-20240402185045810.png)





![分布式全局流量-zset](https://gitee.com/mingzijian/resources/raw/master/picgo/2024-03/image-20240403105708204.png)

